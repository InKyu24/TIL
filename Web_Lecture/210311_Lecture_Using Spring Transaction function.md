# 스프링 트랜잭션 기능 사용하기

## 트랜잭션 기능

트랜잭션 기능은 XML 파일에서 설정하는 방법과 애너테이션을 이용하는 방법이 있다. XML로 설정하는 방법은 설정 파일이 복잡해지면 불편하므로 현재는 애너테이션으로 트랜젝션을 적용하는 방법을 더 선호한다.

트랜잭션(Transcation)은 여러 개의 DML 명령문을 하나의 논리적인 작업 단위로 묶어서 관리하는 것으로, All 또는 Nothing 방식으로 작업 단위가 처리된다. 즉, SQL 명령문들이 모두 정상적으로 처리되었다면 모든 작업의 결과를 데이터베이스에 영구 반영(commit)하지만 그 중 하나라도 잘못된 것이 있으면 모두 취소(rollback)한다.

Service 클래스의 각 메서드가 애플리케이션의 단위 기능을 수행한다. 단위 기능1은 DAO 클래스의 SQL문 하나로 기능을 수행하는 반면에 단위 기능2나 단위 기능3은 여러 개의 SQL문을 묶어서 작업을 처리한다. 그런데 묶어서 작업을 처리할 때 어느 하나의 SQL문이라도 잘못되면 이전에 수행한 모든 작업을 취소해야만 작업의 일관성이 유지된다.

따라서 트랜잭션은 각 단위 기능 수행 시 이와 관련된 데이터베이스 연동 작업을 한꺼번에 묶어서 관리하는 개념이다.

일반적으로 웹 애플리케이션에서 묶어서 처리하는 단위 기능은 아래와 같다.

+ 게시판 글 조회 시 해당 글을 조회하는 기능과 조회 수를 갱신하는 기능
+ 쇼핑몰에서 상품 주문 시 주문 상품을 테이블에 등록하는 기능과 주문자의 포인트를 갱신하는 기능
+ 은행에서 송금 시 송금자의 잔고를 갱신하는 기능과 수신자의 잔고를 갱신하는 기능



## 스프링의 트랜잭션 속성 알아보기 [SpringTest06_TX]

```java
// AccountServiceImpl 클래스의 모든 메서드에 트랜잭션을 적용
@Transactional(propagation = Propagation.REQUIRED)
public class AccountServiceImpl implements AccountService {
    ...
```

