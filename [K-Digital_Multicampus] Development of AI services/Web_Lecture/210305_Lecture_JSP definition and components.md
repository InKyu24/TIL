# JSP 정의와 구성요소

## JSP 등장 배경

인터넷 사용자가 증가하고 사용자에게 보여주는 화면의 기능이나 구성이 복잡해짐에 따라 사용자를 고려하는 화면 요구 사항이 늘어났다. 그래서 현재는 프로그래머가 서블릿으로 화면을 구현하지 않고 주로 디자이너가 이 일을 담당하게 되었다.

기존 서블릿에서 화면을 구현할 때는 서블릿의 응답 기능을 이용했다. 자바 코드를 이용해 HTML 태그를 브라우저로 전송하는 방식으로 말이다. 화면 구성이 복잡해짐에 따라 디자이너의 역할이 커지기 시작했는데 화면 기능 구현 시 많은 불편함이 있었다. 그래서 서블릿의 기능 중 별도로 화면 기능을 디자이너가 작업하기 쉽게 하기 위해 JSP가 등장하게 되었다.

기존 서블릿이 처리하는 기능 중 비즈니스 로직 기능과 화면 기능을 분리하기 위해 JSP는 디자이너 입장에서 화면의 수월한 기능 구현과 개발 후 화면의 편리한 유지관리를 목적으로 도입되었다. 기존 서블릿에서는 자바 코드를 기반으로 문자열을 사용해 HTML과 자바스크립트로 화면을 구현했으나 JSP는 이와 반대로 HTML, CSS와 자바스크립트를 기반으로 JSP 요소들을 사용해 화면을 구현한다.



### JSP의 구성 요소

JPS라고 해서 기존의 웹 페이지를 구현하는 HTML이나 자바스크립트와 관련이 없다는 말이 아니다. JSP는 HTML과 CSS와 자바스크립트를 기반으로 JSP에서 제공하는 여러 가지 구성 요소들을 사용해 화면을 구현하는 기술이다. 주로 웹 프로그램의 호면 기능과 모델2 기반 MVC에서 뷰 기능을 담당하게 된다.

JSP 구성 요소는 아래와 같다.

+ HTML 태그, CSS 그리고 자바스크립트 코드
+ JSP 기본 태그
+ JSP 액션 태그
+ 개발자가 직접 만들거나 프레임워크에서 제공하는 커스텀 태그.



## JSP의 3단계 작업 과정

서블릿에서는 자바 코드와 함께 원하는 HTML 화면을 구성했다. 따라서 서블릿으로 화면을 구현하려면 화면에 해당하는 HTML 태그를 브라우저로 전송해 주기만 하면 브라우저가 받아서 실시간으로 구현해준다.

그런데 JSP는 HTML, CSS와 자바스크립트는 물론이고 JSP에서 제공하는 여러 구성 요소가 혼재하여 화면을 구현하는데 사용된다. 따라서 JSP는 톰캣 컨테이너에 의해 브라우저로 전송되기 전에 실행 단계를 거쳐야 한다.

JSP 파일은 아래 3단계를 거쳐 실행된다.

1. 변환 단계 : 컨테이너는 JSP파일을 자바 파일로 변환한다.
2. 컴파일 단계 : 컨테이너는 변환된 자바 파일을 클래스 파일로 컴파일한다.
3. 실행 단계 : 컨테이너는 class 파일을 실행하여 그 결과(HTML, CSS와 자바스크립트 코드)를 브라우저로 전송해 출력한다.

즉, 브라우저로 전송된 결과는 HTML, CSS, 자바스크립트로 변환된 파일이 된다.



## JSP 페이지 구성 요소

JSP 페이지 내 구성 요소들은 아래와 같이 정리할 수 있다.

+ Template
  + HTML, TEXT, CSS, JS, XML
+ JSP element
  + Scripting
    + directive `<%@ %>` : 설정 및 지시 기능
      + page : contentType, import ...
      + include : 특정 file
      + taglib : 커스텀 태그 처리 지시
    + declaration `<%! %>` :  멤버 변수와 메서드를 선언 [자바 태그 영역]
    + scriptlet `<% %>` : 서비스 메소드 내용 [자바 태그 영역]
    + expression `<%~ %>` : out.write(...) [자바 태그 영역]
  + tag
    + standard tag `<jsp: />` : 표준
    + custom tag `<inkyu: />` : 사용자 지정